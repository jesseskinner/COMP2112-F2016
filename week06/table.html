<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Table data</title>
</head>
<body>

<table>
</table>

<script>
// our data is a list of emails
var data = [
    {"subject":"hi","body":"how r u?"},
    {"subject":"URGENT","body":"FIX MY SITE"}
]

// get the <table> so we can append rows
var table = document.querySelector('table')

function renderTable(data) {
    // erase the contents
    table.innerHTML = ''

    // loop over each email and create a row
    data.forEach(function (email, rowNumber) {
        // create <tr><td>subject</td><td>body</td></tr>
        var tr = document.createElement('tr')
        var tdSubject = document.createElement('td')
        var tdBody = document.createElement('td')
        var subject = document.createTextNode(email.subject)
        var body = document.createTextNode(email.body)

        tdSubject.appendChild(subject)
        tdBody.appendChild(body)

        // setAttribute data-row
        tr.setAttribute('data-row', rowNumber)

        tr.appendChild(tdSubject)
        tr.appendChild(tdBody)

        table.appendChild(tr)
    })
}

// listen for clicks on the <table>
// TODO: change the data when a <td> is clicked
table.addEventListener('click', function (event) {
    var td = event.target
    var tr = td.parentNode

    var rowNumber = tr.getAttribute('data-row')

    var email = data[rowNumber]

    email.subject = 'read'

    renderTable(data)
    // TODO: use getAttribute to set data[rowNumber]
})

renderTable(data)
</script>

</body>
</html>
